<!DOCTYPE html>


<!--
 | Generated by Apache Maven Doxia Site Renderer 1.11.1 from src/site/apt/setup.apt at 2023-05-15
 | Rendered using Apache Maven Fluido Skin 1.11.2
-->
<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="generator" content="Apache Maven Doxia Site Renderer 1.11.1" />
    <title>Tomcat JWT Authenticator &#x2013; </title>
    <link rel="stylesheet" href="./css/apache-maven-fluido-1.11.2.min.css" />
    <link rel="stylesheet" href="./css/site.css" />
    <link rel="stylesheet" href="./css/print.css" media="print" />
    <script src="./js/apache-maven-fluido-1.11.2.min.js"></script>
    <style>.github-fork-ribbon:before { background-color: gray; }</style>
  </head>
  <body class="topBarDisabled">
    <a class="github-fork-ribbon right-top" href="https://github.com/minfrin/tomcat-jwt-authenticator" data-ribbon="Fork me on GitHub" title="Fork me on GitHub">Fork me on GitHub</a>
    <div class="container-fluid">
      <header>
        <div id="banner">
          <div class="pull-left"><div id="bannerLeft"><h1>Tomcat JWT Authenticator</h1>
</div>
</div>
          <div class="pull-right"></div>
          <div class="clear"><hr/></div>
        </div>

        <div id="breadcrumbs">
          <ul class="breadcrumb">
        <li id="publishDate">Last Published: 2023-05-15<span class="divider">|</span>
</li>
          <li id="projectVersion">Version: 2.0.0-SNAPSHOT</li>
          </ul>
        </div>
      </header>
      <div class="row-fluid">
        <header id="leftColumn" class="span2">
          <nav class="well sidebar-nav">
  <ul class="nav nav-list">
   <li class="nav-header">Overview</li>
    <li><a href="index.html" title="Introduction"><span class="none"></span>Introduction</a></li>
    <li class="active"><a><span class="none"></span>Setup</a></li>
    <li><a href="http://www.apache.org/licenses/" class="externalLink" title="License"><span class="none"></span>License</a></li>
    <li><a href="https://github.com/minfrin/tomcat-jwt-authenticator/releases" class="externalLink" title="Download"><span class="none"></span>Download</a></li>
   <li class="nav-header">Project Documentation</li>
    <li><a href="project-info.html" title="Project Information"><span class="icon-chevron-right"></span>Project Information</a></li>
  </ul>
          </nav>
          <div class="well sidebar-nav">
            <div id="poweredBy">
              <div class="clear"></div>
              <div class="clear"></div>
              <div class="clear"></div>
<a href="http://maven.apache.org/" title="Built by Maven" class="poweredBy"><img class="builtBy" alt="Built by Maven" src="./images/logos/maven-feather.png" /></a>
            </div>
          </div>
        </header>
        <main id="bodyColumn"  class="span10" >
<section>
<h2><a name="Setup"></a>Setup</h2><section>
<h3><a name="Classpath">Classpath</a></h3>
<p>Add <i>tomcat-jwt-authenticator</i> to the Tomcat classpath, along with <i>nimbus-jose-jwt</i> and its dependency <i>jcip-annotations</i>.</p>
<p>For more details see the <a href="./dependencies.html"> dependencies</a>.</p></section><section>
<h3><a name="Deployment_Descriptor_web.xml">Deployment Descriptor web.xml</a></h3>
<p>Add the auth-method BEARER to the login-config in the web application descriptor web.xml.</p>
<div class="source"><pre class="prettyprint">  &lt;login-config&gt;
    &lt;auth-method&gt;BEARER&lt;/auth-method&gt;
    &lt;realm-name&gt;MyRealm&lt;/realm-name&gt;
  &lt;/login-config&gt;</pre></div></section><section>
<h3><a name="Token_Security">Token Security</a></h3>
<p>Bearer tokens can be passed in the clear, signed and/or encrypted. Pass properties to Tomcat to configure the security level required.</p>
<ul>
<li><a name="Plain_Tokens">Plain Tokens</a>
<p>A plain token is passed with claims in the clear, and the contents of the token are used without further verification.</p>
<p>This must only be used where the channel over which the token is carried is separately authenticated, such as through mutual TLS authentication, or unix domain sockets, as a client has full control over the authentication.</p>
<p>This is typically used to pass authentication data between a proxy and a server where the proxy has authenticated the user.</p>
<div class="source"><pre class="prettyprint">JAVA_OPTS=&quot;-Dmedia.pepperpot.jwt.allowPlain=true&quot;</pre></div></li>
<li><a name="Signed_Tokens">Signed Tokens</a>
<p>A signed token is passed with claims in the clear, however the claims are only accepted if the signature on the token is verified.</p>
<p>This must only be used where the channel over which the token is carried is kept private, such as through TLS. While someone getting access to the channel will see the contents of the token, the token cannot be altered.</p>
<p>To verify a signed token, specify the signing algorithm to be used, and the path to a file containing the secret or public/private key.</p>
<div class="source"><pre class="prettyprint">JAVA_OPTS=&quot;-Dmedia.pepperpot.jwt.JWSAlgorithm=HS256 -Dmedia.pepperpot.jws.SecretFile=/etc/tomcat/jws-secret.txt&quot;</pre></div></li>
<li><a name="Encrypted_Tokens">Encrypted Tokens</a>
<p>An encrypted token is passed with claims masked by encryption, and the claims are only accepted if the encryption on the token is successfully decrypted and verified.</p>
<p>The channel over which the token is carried must be kept private, such as through TLS.</p>
<p>To verify an encrypted token, specify the encryption algorithm and encryption method to be used, along with the file containing the key.</p>
<div class="source"><pre class="prettyprint">JAVA_OPTS=&quot;-Dmedia.pepperpot.jwt.JWEAlgorithm=RSA1_5 -Dmedia.pepperpot.jwt.JWEEncryptionMethod=A128CBC-HS256 -Dmedia.pepperpot.jwe.JwkSetFile=/etc/tomcat/rfc7516-a2.jwk&quot;</pre></div></li></ul></section><section>
<h3><a name="Parameters">Parameters</a></h3>
<p>No authentication is accepted without being explicitly switched on. To switch the authenticator on, at least one of the parameters must be specified below.</p>
<ul>
<li><code>media.pepperpot.jwt.allowPlain</code>: <b>optional</b>, Accept JWT tokens that are both unsigned and unencrypted. Use over a separately authenticated channel. This can be used where a proxy authenticates the user, and needs to pass the user's identity to the server. Default to <i>false</i>.</li>
<li><code>media.pepperpot.jwt.JWSAlgorithm</code>: <b>optional</b>, Use the given algorithm to verify the signatures on signed JWT tokens. Choose one of <i>HS256</i>, <i>HS384</i> <i>HS512</i>, <i>RS256</i>, <i>RS384</i>, <i>RS512</i>, <i>ES256</i>, <i>ES256K</i>, <i>ES384</i>, <i>ES512</i>, <i>PS256</i>, <i>PS384</i>, <i>PS512</i>, <i>EdDSA</i>.</li>
<li><code>media.pepperpot.jws.SecretFile</code>: <b>optional</b>, Accept signed JWT tokens protected by the shared key in the file specified.</li>
<li><code>media.pepperpot.jws.JwkSetFile</code>: <b>optional</b>, Accept signed JWT tokens protected by the keys in the file specified. The file is an RFC 7517 JWK file.</li>
<li><code>media.pepperpot.jws.RemoteJwkSetUrl</code>: <b>optional</b>, Accept signed JWT tokens protected by the keys at the URL specified. The response to the URL is an RFC 7517 JWK file.</li>
<li><code>media.pepperpot.jwt.JWEAlgorithm</code>: <b>optional</b>, Use the given algorithm to verify encrypted JWT tokens. Choose one of <i>RSA-OAEP-256</i>, <i>RSA-OAEP-384</i>, <i>RSA-OAEP-512</i>, <i>RSA-OAEP</i> (deprecated), <i>RSA1_5</i> (deprecated), <i>A128KW</i>, <i>A192KW</i>, <i>A256KW</i>, <i>dir</i>, <i>ECDH-ES</i>, <i>ESDH-ES+A128KW</i>, <i>ESDH-ES+A192KW</i>, <i>ESDH-ES+A256KW</i>, <i>ECDH-1PU</i>, <i>ESDH-1PU+A128KW</i>, <i>ESDH-1PU+A192KW</i> <i>ESDH-1PU+A256KW</i>, <i>PBES2-HS256+A128KW</i>, <i>PBES2-HS256+A192KW</i> or <i>PBES2-HS256+A256KW</i></li>
<li><code>media.pepperpot.jwt.JWEEncryptionMethod</code>: <b>optional</b>, Use the given encryption method to verify encrypted JWT tokens. Choose one of <i>A128CBC-HS256</i>, <i>A192CBC-HS384</i>, <i>A256CBC-HS512</i>, <i>A128GCM</i>, <i>A192GCM</i>, <i>A256GCM</i>, <i>XC20P</i>, <i>A128CBC+HS256</i> (deprecated) or <i>A256CBC+HS512</i> (deprecated).</li>
<li><code>media.pepperpot.jwe.SecretFile</code>: <b>optional</b>, Accept encrypted JWT tokens protected by the shared key in the file specified. If this option is unset, the <code>media.pepperpot.jws.SecretFile</code> is used instead.</li>
<li><code>media.pepperpot.jwe.JwkSetFile</code>: <b>optional</b>, Accept encrypted JWT tokens protected by the keys in the file specified. The file is an RFC 7517 JWK file. If this option is unset, the <code>media.pepperpot.jws.JwkSetFile</code> is used instead.</li>
<li><code>media.pepperpot.jwe.RemoteJwkSetUrl</code>: <b>optional</b>, Accept encrypted JWT tokens protected by the keys at the URL specified. The response to the URL is an RFC 7517 JWK file. If this option is unset, the <code>media.pepperpot.jws.RemoteJwkSetUrl</code> is used instead.</li>
<li><code>media.pepperpot.jwt.MaxClockSkew</code>: <b>optional</b>, Allow a clock skew of the number of seconds specified. Defaults to 60 seconds.</li>
<li><code>media.pepperpot.jwt.AcceptedAudience</code>: <b>optional</b>, Comma separated list of audience strings that will be accepted. Any token outside of this list will not be accepted.</li>
<li><code>media.pepperpot.jwt.RequiredClaims</code>: <b>optional</b>, Comma separated list of claims that must be present for the token to be accepted.</li>
<li><code>media.pepperpot.jwt.ProhibitedClaims</code>: <b>optional</b>, Comma separated list of claims that must be absent for the token to be accepted.</li></ul></section></section>
        </main>
      </div>
    </div>
    <hr/>
    <footer>
      <div class="container-fluid">
        <div class="row-fluid">
            <p>&#169;      2019&#x2013;2023
</p>
        </div>
      </div>
    </footer>
<script>
	if(anchors) {
	  anchors.add();
	}
</script>
  </body>
</html>
